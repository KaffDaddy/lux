define(["jquery"],function(t){"use strict";function e(t){var e=this;this.initialize=function(){a(),n(),i(),l(),r(),o(),c()};var a=function(){for(var t=document.querySelectorAll("[data-lux-action-leadlistdetail]"),e=0;e<t.length;e++){var a=t[e];a.addEventListener("click",function(){u(t,"lux-action-detail"),this.classList.add("lux-action-detail");var e=this.getAttribute("data-lux-action-leadlistdetail");d(TYPO3.settings.ajaxUrls["/lux/leadlistdetail"],{visitor:e},"generalDetailCallback")})}},n=function(){for(var t=document.querySelectorAll("[data-lux-action-analysiscontentdetailpage]"),e=0;e<t.length;e++){var a=t[e];a.addEventListener("click",function(){u(t,"lux-action-detail"),this.classList.add("lux-action-detail");var e=this.getAttribute("data-lux-action-analysiscontentdetailpage");d(TYPO3.settings.ajaxUrls["/lux/analysiscontentdetailpage"],{page:e},"generalDetailCallback")})}},i=function(){for(var t=document.querySelectorAll("[data-lux-action-analysiscontentdetaildownload]"),e=0;e<t.length;e++){var a=t[e];a.addEventListener("click",function(){u(t,"lux-action-detail"),this.classList.add("lux-action-detail");var e=this.getAttribute("data-lux-action-analysiscontentdetaildownload");d(TYPO3.settings.ajaxUrls["/lux/analysiscontentdetaildownload"],{download:e},"generalDetailCallback")})}},l=function(){var t=document.querySelector('[data-lux-container="detail"]');null!==t&&t.addEventListener("click",function(t){var e=t.target;if(e.getAttribute("data-lux-visitor-description")>0){e.classList.contains("lux-textarea__default")&&(e.classList.remove("lux-textarea__default"),e.value="");var a=e.getAttribute("data-lux-visitor-description");e.addEventListener("blur",function(){d(TYPO3.settings.ajaxUrls["/lux/visitordescription"],{visitor:a,value:this.value},null)})}})},r=function(){var t=document.querySelector('[data-lux-container="detail"]');null!==t&&t.addEventListener("click",function(t){var e=t.target;if(null!==e.getAttribute("data-lux-linkmock-event")){var a=e.getAttribute("data-lux-linkmock-event"),n=document.querySelector('[data-lux-linkmock-link="'+a+'"]');null!==n&&n.click()}})};this.generalDetailCallback=function(t){document.querySelector('[data-lux-container="detail"]').innerHTML=t.html,window.LuxDiagramObject.initialize()};var o=function(){null!==document.querySelector(".t3js-datetimepicker")&&require(["TYPO3/CMS/Backend/DateTimePicker"],function(t){t.initialize()})},c=function(){for(var t=document.querySelectorAll("[data-lux-confirm]"),e=0;e<t.length;e++)t[e].addEventListener("click",function(t){var e=t.currentTarget.getAttribute("data-lux-confirm");confirm(e)===!1&&t.preventDefault()})},u=function(t,e){for(var a=0;a<t.length;a++)t[a].classList.remove(e)},d=function(t,a,n){if(void 0!==t&&""!==t){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&200===this.status&&null!==n&&e[n](JSON.parse(this.responseText))},i.open("POST",s(t,a),!0),i.send()}else console.log("No ajax URI given!")},s=function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t+=t.indexOf("?")!==-1?"&":"?",t+=a+"="+encodeURIComponent(e[a]));return t}}t(document).ready(function(){var a=new e(t);a.initialize()})});