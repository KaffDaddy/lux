function LuxIdentification(){"use strict";this.idCookie="";var t="luxId";this.setIdCookieProperty=function(){this.idCookie=this.getIdCookie()},this.setIdCookie=function(){this.idCookie=i(32),n(t,this.idCookie)},this.getIdCookie=function(){return e(t)},this.setDisableForLinkCookie=function(){n("luxDisableEmail4Link",!0)},this.isDisableForLinkCookieSet=function(){return"true"===e("luxDisableEmail4Link")},this.setTrackingOptOutStatus=function(){n("luxTrackingOptOut",!0)},this.removeTrackingOptOutStatus=function(){n("luxTrackingOptOut",!1)},this.isOptOutStatusSet=function(){return"true"===e("luxTrackingOptOut")};var e=function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return""},n=function(t,e){var n=new Date,i=n.getTime();i+=31536e7,n.setTime(i),document.cookie=t+"="+e+"; expires="+n.toUTCString()+"; path=/"},i=function(t){for(var e="",n="abcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}}function LuxMain(){"use strict";this.lightboxInstance=null;var t=this,e=null;this.initialize=function(){e=new window.LuxIdentification,n(),I()&&(e.setIdCookieProperty(),C(),i(),o(),a(),u()),r(),f(),x()},this.closeLightbox=function(){null!==t.lightboxInstance&&t.lightboxInstance.close()};var n=function(){for(var t=document.querySelectorAll('[data-lux-trackingoptout="checkbox"]'),n=0;n<t.length;n++){var i=t[n];i.checked=e.isOptOutStatusSet()===!1,i.addEventListener("change",function(){e.isOptOutStatusSet()?e.removeTrackingOptOutStatus():e.setTrackingOptOutStatus()})}},i=function(){b()&&_({"tx_lux_fe[dispatchAction]":"pageRequest","tx_lux_fe[idCookie]":e.getIdCookie(),"tx_lux_fe[arguments][pageUid]":A(),"tx_lux_fe[arguments][referrer]":y(),"tx_lux_fe[arguments][currentUrl]":encodeURIComponent(window.location.href)},S(),"generalWorkflowActionCallback",null)};this.generalWorkflowActionCallback=function(e){for(var n=0;n<e.length;n++)if(e[n].action)try{t[e[n].action+"WorkflowAction"](e[n])}catch(i){console.log(i)}},this.lightboxContentWorkflowAction=function(e){var n=e.configuration.contentElement,i=document.querySelector("[data-lux-contenturi]").getAttribute("data-lux-contenturi")||"/index.php?id=1&type=1520192598",o='<div><iframe src="'+i+"&luxContent="+parseInt(n)+'" width="800" height="600"></iframe></div>';t.lightboxInstance=basicLightbox.create(o),setTimeout(function(){t.lightboxInstance.show()},parseInt(e.configuration.delay))},this.redirectWorkflowAction=function(t){t.configuration.uri&&(window.location=t.configuration.uri)},this.ajaxContentWorkflowAction=function(t){var e=document.querySelector("[data-lux-contenturiwithoutheader]").getAttribute("data-lux-contenturiwithoutheader")||"/index.php?id=1&type=1560175278",n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=document.querySelector(t.configuration.domselection);null!==e?e.innerHTML=this.responseText:console.log("Element "+t.configuration.domselection+" could not be found in HTML")}},n.open("POST",L(e,{luxContent:parseInt(t.configuration.contentElement)}),!0),n.send()},this.showorhideWorkflowAction=function(t){var e=document.querySelector(t.configuration.domselection);null!==e?"hide"===t.configuration.showorhide?e.style.display="none":"show"===t.configuration.showorhide&&(e.style.display="block"):console.log("Element "+t.configuration.domselection+" could not be found in HTML")},this.disableEmail4LinkWorkflowAction=function(t){e.setDisableForLinkCookie()};var o=function(){var t="form:not([data-lux-form-identification]) input:not([data-lux-disable]), ";t+="form:not([data-lux-form-identification]) textarea:not([data-lux-disable]), ",t+="form:not([data-lux-form-identification]) select:not([data-lux-disable]), ",t+="form:not([data-lux-form-identification]) radio:not([data-lux-disable]), ",t+="form:not([data-lux-form-identification]) check:not([data-lux-disable])";for(var e=document.querySelectorAll(t),n=0;n<e.length;n++){var i=e[n];"password"!==i.type&&g(i)&&i.addEventListener("change",function(){s(this)})}},a=function(){for(var t=document.querySelectorAll("form[data-lux-form-identification]"),e=0;e<t.length;e++)t[e].addEventListener("submit",function(t){"preventDefault"===t.target.getAttribute("data-lux-form-identification")&&t.preventDefault(),d(t.target)})},r=function(){for(var t=document.querySelectorAll("[data-lux-email4link-title]"),e=0;e<t.length;e++){var n=t[e];n.addEventListener("click",function(t){l(this,t)})}},u=function(){if(w())for(var t,n=document.querySelectorAll(m()),i=0;i<n.length;i++)n[i].hasAttribute("data-lux-email4link-title")||(t=n[i].getAttribute("href"),n[i].addEventListener("click",function(){_({"tx_lux_fe[dispatchAction]":"downloadRequest","tx_lux_fe[idCookie]":e.getIdCookie(),"tx_lux_fe[arguments][href]":this.getAttribute("href")},S(),null,null)}))},l=function(n,i){if(e.isDisableForLinkCookieSet()===!1){i.preventDefault();var o=n.getAttribute("data-lux-email4link-title")||"",a=n.getAttribute("data-lux-email4link-text")||"",r=n.getAttribute("href"),u=document.querySelectorAll('[data-lux-container="email4link"]');if(u.length>0){var l=u[0].cloneNode(!0),s=l.innerHTML;s=s.replace("###TITLE###",o),s=s.replace("###TEXT###",a),s=s.replace("###HREF###",N(r)),t.lightboxInstance=basicLightbox.create(s),t.lightboxInstance.element().querySelector('[data-lux-email4link="form"]').addEventListener("submit",function(t){c(this,t,n)}),t.lightboxInstance.show()}}},c=function(n,i,o){i.preventDefault();var a=o.getAttribute("href"),r=o.getAttribute("data-lux-email4link-sendemail")||"false",u=t.lightboxInstance.element().querySelector('[data-lux-email4link="email"]').value;D(u)?(q(),_({"tx_lux_fe[dispatchAction]":"email4LinkRequest","tx_lux_fe[idCookie]":e.getIdCookie(),"tx_lux_fe[arguments][email]":u,"tx_lux_fe[arguments][sendEmail]":"true"===r,"tx_lux_fe[arguments][href]":a},S(),"email4LinkLightboxSubmitCallback",{sendEmail:"true"===r,href:a})):M(t.lightboxInstance.element().querySelector('[data-lux-email4link="errorEmailAddress"]'))};this.email4LinkLightboxSubmitCallback=function(e,n){T(),e.error===!0?M(t.lightboxInstance.element().querySelector('[data-lux-email4link="errorEmailAddress"]')):n.sendEmail===!0?(E(t.lightboxInstance.element().querySelector('[data-lux-email4link="form"]')),M(t.lightboxInstance.element().querySelector('[data-lux-email4link="successMessageSendEmail"]')),setTimeout(function(){t.lightboxInstance.close()},2e3)):setTimeout(function(){t.lightboxInstance.close(),window.location=n.href},500)};var s=function(t){var n=h(t,p()),i=t.value;_({"tx_lux_fe[dispatchAction]":"fieldListeningRequest","tx_lux_fe[idCookie]":e.getIdCookie(),"tx_lux_fe[arguments][key]":n,"tx_lux_fe[arguments][value]":i},S(),"generalWorkflowActionCallback",null)},d=function(t){for(var n={},i=0;i<t.elements.length;i++){var o=t.elements[i],a=h(o,v());""!==a&&(n[a]=o.value)}_({"tx_lux_fe[dispatchAction]":"formListeningRequest","tx_lux_fe[idCookie]":e.getIdCookie(),"tx_lux_fe[arguments][values]":JSON.stringify(n)},S(),"generalWorkflowActionCallback",null)},f=function(){if("1"===navigator.doNotTrack){for(var t=document.querySelectorAll('[data-lux-container-optout="text"]'),e=0;e<t.length;e++)E(t[e]);for(var n=document.querySelectorAll('[data-lux-container-optout="textDoNotTrack"]'),i=0;i<n.length;i++)M(n[i])}},x=function(){var t=document.querySelector('[data-lux-action="createIdCookie"]');null!==t&&t.addEventListener("click",function(){""===e.idCookie&&e.setIdCookie()})},g=function(t){return""!==h(t,p())},h=function(t,e){var n="",i=t.name;for(var o in e)if(e.hasOwnProperty(o))for(var a=0;a<e[o].length;a++)k(i,e[o][a])&&(n=o);return n},m=function(){var t=O().getAttribute("data-lux-downloadtracking-extensions").toLowerCase().split(",");return'a[href$="'+t.join('"],a[href$="')+'"]'},k=function(t,e){if(e.indexOf("*")!==-1){e=e.replace("*","");var n=t.indexOf(e)!==-1}else n=t===e;return n},p=function(){var t={};try{t=JSON.parse(window.luxFieldMappingConfiguration)}catch(e){console.log("Lux: No fieldmapping configuration given.")}return t},v=function(){var t={};try{t=JSON.parse(window.luxFormFieldMappingConfiguration)}catch(e){console.log("Lux: No formfieldmapping configuration given.")}return t},b=function(){var t=!1,e=O();if(null!==e&&e.hasAttribute("data-lux-pagetracking")){var n=e.getAttribute("data-lux-pagetracking");t="1"===n}return t},w=function(){var t=!1,e=O();if(null!==e&&e.hasAttribute("data-lux-downloadtracking")){var n=e.getAttribute("data-lux-downloadtracking");t="1"===n}return t},A=function(){var t=0,e=O();if(null!==e&&e.hasAttribute("data-lux-pageuid")){var n=e.getAttribute("data-lux-pageuid");t=parseInt(n)}return t},y=function(){return encodeURIComponent(document.referrer)},C=function(){""===e.idCookie&&"1"===O().getAttribute("data-lux-enableautocookie")&&e.setIdCookie()},S=function(){var t=O();return null!==t?t.getAttribute("data-lux-requesturi"):""},_=function(e,n,i,o){if(o=o||{},""!==n){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===this.readyState&&200===this.status&&null!==i&&t[i](JSON.parse(this.responseText),o)},a.open("POST",L(n,e),!0),a.send()}else console.log("No ajax URI given!")},L=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t+=t.indexOf("?")!==-1?"&":"?",t+=n+"="+e[n]);return t},I=function(){return e.isOptOutStatusSet()===!1&&"1"!==navigator.doNotTrack&&null!==O()&&"1"===O().getAttribute("data-lux-enable")},O=function(){return document.getElementById("lux_container")},q=function(){document.body.className+=" lux_waiting"},T=function(){document.body.classList.remove("lux_waiting")},E=function(t){t.style.display="none"},M=function(t){t.style.display="block"},D=function(t){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)},N=function(t){var e=t.replace(/^.*[\\\/]/,""),n=["pdf","txt","doc","docx","xls","xlsx","ppt","pptx","jpg","png","zip"];return R(W(e).toLowerCase(),n)&&(t=e),t},R=function(t,e){for(var n=e.length,i=0;i<n;i++)if(e[i]===t)return!0;return!1},W=function(t){return t.indexOf(".")!==-1?t.split(".").pop():""}}var Lux=new window.LuxMain;Lux.initialize();