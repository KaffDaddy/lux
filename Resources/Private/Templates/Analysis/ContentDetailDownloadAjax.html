<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">
            <f:translate key="LLL:EXT:lux/Resources/Private/Language/locallang_db.xlf:module.analysis.detaildownloads">downloads</f:translate>
        </h3>
    </div>
    <div class="panel-body">

        <f:if condition="{downloads}">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th><f:translate key="LLL:EXT:lux/Resources/Private/Language/locallang_db.xlf:module.analysis.detailpage.title">Title</f:translate></th>
                    <th><f:translate key="LLL:EXT:lux/Resources/Private/Language/locallang_db.xlf:module.analysis.detailpage.lead">Lead</f:translate></th>
                    <th><f:translate key="LLL:EXT:lux/Resources/Private/Language/locallang_db.xlf:module.analysis.detailpage.company">Company</f:translate></th>
                    <th><f:translate key="LLL:EXT:lux/Resources/Private/Language/locallang_db.xlf:module.analysis.detailpage.time">Time</f:translate></th>
                </tr>
                </thead>
                <tbody>
                <f:for each="{downloads}" as="download">
                    <tr>
                        <td>
                            <span title="{download.href}">
                                <lux:format.getFilenameFromPathAndFilename pathAndFilename="{download.href}"/>
                            </span>
                        </td>
                        <td><f:link.action action="detail" controller="Lead" arguments="{visitor:download.visitor}">{download.visitor.fullName}</f:link.action></td>
                        <td>{download.visitor.company}</td>
                        <td>
                            <span class="badge" title="{f:format.date(date:download.crdate,format:'{f:translate(key:\'LLL:EXT:lux/Resources/Private/Language/locallang_db.xlf:date\')}')}">
                                <lux:format.readableDate>{download.crdate}</lux:format.readableDate>
                            </span>
                        </td>
                    </tr>
                </f:for>
                </tbody>
            </table>

            <button style="margin-top: 15px" class="btn btn-primary pull-right" data-lux-linkmock-event="detaildownload{downloads.0.uid}"><f:translate key="LLL:EXT:lux/Resources/Private/Language/locallang_db.xlf:module.detail.detail">show</f:translate></button>
        </f:if>
    </div>
</div>

<f:alias map="{headerPostfix: '{lux:format.getFilenameFromPathAndFilename(pathAndFilename:downloads.0.href)}'}">
    <f:render partial="Box/Analysis/Downloads" arguments="{_all}"/>
</f:alias>
